<!DOCTYPE html>
<!-- THis is the html for the admin page to demo the admins abilities-->
<html lang="en">

<head>
    <title>Prototype Demo (Admin)</title>
    <meta name="description" content="Admin page to demo the admins abilities">
    <meta http-equiv="X-UA-Compatible" content="IE=edge;" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Load Solace Web Messaging API for JavaScript -->
    <script src="lib/solclient-debug.js"></script>

    <!-- Load js to process the various admin functions-->
    <script src="log.js"></script>

    <!-- Solace cloud login details-->
    <script src="config/config.js" type="text/javascript"></script>

    <!-- load js to run the ui for this page-->
    <script src="ui.js"></script>

    <!-- Load CSS-->
    <link rel="stylesheet" type="text/css" href="css/pure.css">
    </link>
    <link rel="stylesheet" type="text/css" href="css/samples.css">
    </link>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/2.1.0/joint.css" />
    <!-- Load W3.CSS-->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <!-- run script to initalize solclient and listners for buttons-->
    <script>
        var producer = null;
        window.onload = function () {
            // Initialize factory with the most recent API defaults
            var factoryProps = new solace.SolclientFactoryProperties();
            factoryProps.profile = solace.SolclientFactoryProfiles.version10;
            solace.SolclientFactory.init(factoryProps);

            // enable logging to JavaScript console at WARN level
            // NOTICE: works only with "solclientjs-debug.js"
            solace.SolclientFactory.setLogLevel(solace.LogLevel.WARN);
            consumer = new QueueConsumer('SOLACE_QUEUE', 'logtable', 'log');
            document.getElementById("connect").addEventListener("click", consumer.connect);
            document.getElementById("disconnect").addEventListener("click", consumer.disconnect);
            document.getElementById("startconsume").addEventListener("click", consumer.startConsume);
            document.getElementById("stopconsume").addEventListener("click", consumer.stopConsume);

            consumer2 = new QueueConsumer('SOLACE_REGISTER', 'regtable', 'log2');
            document.getElementById("connect2").addEventListener("click", consumer2.connect);
            document.getElementById("disconnect2").addEventListener("click", consumer2.disconnect);
            document.getElementById("startconsume2").addEventListener("click", consumer2.startConsume);
            document.getElementById("stopconsume2").addEventListener("click", consumer2.stopConsume);

            consumer3 = new QueueConsumer('SOLACE_TOPICREG', 'toptable', 'log3');
            document.getElementById("connect3").addEventListener("click", consumer3.connect);
            document.getElementById("disconnect3").addEventListener("click", consumer3.disconnect);
            document.getElementById("startconsume3").addEventListener("click", consumer3.startConsume);
            document.getElementById("stopconsume3").addEventListener("click", consumer3.stopConsume);
        };
    </script>
</head>

<body>
    <!--Warning for users to enable javascript to run this demo-->
    <noscript>Please enable JavaScript on your browser to continue</noscript>
    <div class="banner">
        <div class="banner-interior">
            <span class="logo">
                <img src="image/solace.png" />
            </span>
            <div class="banner-heading">
                Demo (Iter 1)
            </div>
        </div>
    </div>
    <div class="w3-bar w3-black">
        <button class="w3-bar-item w3-button tablink w3-red" onclick="openStuff(event, 'messageLog')">Message
            Log</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'regAgency')">Register Agency</button>
        <button class="w3-bar-item w3-button tablink" onclick="openStuff(event, 'regTopic')">Register New Topic</button>
    </div>

    <!-- Tab to populate and view message log of all messages sent-->
    <div id="messageLog" class="w3-container w3-border pubsub">
        <div class="w3-bar">
            <p>
                <button type="button" class="pure-button pure-button-primary" id="connect">Connect</button>
                <button type="button" class="pure-button button-error" id="disconnect">Disconnect</button>
                <button type="button" class="pure-button pure-button-primary" id="startconsume">Consume message log
                </button>
                <button type="button" class="pure-button button-error" id="stopconsume">Stop consuming</button>
            </p>
        </div>
        <p>
            <div class="input">
                <div class="publishlog" id="log" contentEditable="true"></div>
            </div>
        </p>
        
        <br>
        <div class="w3-dropdown-click">
                <button onclick="myDropdown()" class="w3-button w3-black">Click Me!</button>
                <div id="topicDropdown" class="w3-dropdown-content w3-bar-block w3-border">
                <input class="w3-bar w3-input w3-border w3-light-grey w3-hover-shadow w3-hover-border-teal" type="text"
                id="input1" onkeyup="mySearch('input1','logtable')" placeholder="Search (e.g. NEA)"></input>
                </div>
              </div>
        <table class="w3-table-all w3-hoverable w3-card-4" , id="logtable">
            <tr class='w3-teal'>
                <th>Topic Destination</th>
                <th>Message</th>
            </tr>
        </table>
    </div>

    <!-- Tab to populate and view requests to register and connect new agency to the central broker -->
    <div id="regAgency" class="w3-container w3-border pubsub" style="display:none">
        <div class="w3-bar">
            <p>
                <button type="button" class="pure-button pure-button-primary" id="connect2">Connect</button>
                <button type="button" class="pure-button button-error" id="disconnect2">Disconnect</button>
                <button type="button" class="pure-button pure-button-primary" id="startconsume2">Consume message log
                </button>
                <button type="button" class="pure-button button-error" id="stopconsume2">Stop consuming</button>
            </p>
        </div>
        <p>
            <div class="input">
                <div class="publishlog" id="log2" contentEditable="true"></div>
            </div>
        </p>
        <input class="w3-bar w3-input w3-border w3-light-grey w3-hover-shadow w3-hover-border-teal" type="text"
            id="input2" onkeyup="mySearch('input2','regtable')" placeholder="Search (e.g. NEA)">
        <br>
        <table class="w3-table-all w3-hoverable w3-card-4" , id="regtable">
            <tr class='w3-teal'>
                <th>Agency Name</th>
                <th>Username</th>
                <th>Password</th>
            </tr>
        </table>
    </div>

    <!-- Tab to populate and view requests to register new topics requests from agencies -->
    <div id="regTopic" class="w3-container w3-border pubsub" style="display:none">
        <div class="w3-bar">
            <p>
                <button type="button" class="pure-button pure-button-primary" id="connect3">Connect</button>
                <button type="button" class="pure-button button-error" id="disconnect3">Disconnect</button>
                <button type="button" class="pure-button pure-button-primary" id="startconsume3">Consume message log
                </button>
                <button type="button" class="pure-button button-error" id="stopconsume3">Stop consuming</button>
            </p>
        </div>
        <p>
            <div class="input">
                <div class="publishlog" id="log3" contentEditable="true"></div>
            </div>
        </p>
        <input class="w3-bar w3-input w3-border w3-light-grey w3-hover-shadow w3-hover-border-teal" type="text"
            id="input3" onkeyup="mySearch('input3','toptable')" placeholder="Search (e.g. NEA)">
        <br>
        <table class="w3-table-all w3-hoverable w3-card-4" , id="toptable">
            <tr class='w3-teal'>
                <th>Agency Name</th>
                <th>Topic</th>
                <th>Description</th>
            </tr>
        </table>
    </div>

</body>
</html>